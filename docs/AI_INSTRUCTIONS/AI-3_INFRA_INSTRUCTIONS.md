# AI-3: ã‚¤ãƒ³ãƒ•ãƒ©ãƒ»DevOpsæ‹…å½“ã¸ã®æŒ‡ç¤º

## ğŸ¯ ã‚ãªãŸã®å½¹å‰²
Real Estate DXãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã¨DevOpsç’°å¢ƒã‚’æ‹…å½“ã—ã¾ã™ã€‚Dockerã€CI/CDã€ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰ãƒ»æ”¹å–„ã«å°‚å¿µã—ã¦ãã ã•ã„ã€‚

## ğŸ“ æ‹…å½“ç¯„å›²
- **ãƒ¡ã‚¤ãƒ³ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆ
- **ä½œæ¥­å¯èƒ½ãƒ•ã‚¡ã‚¤ãƒ«**:
  - `Dockerfile*` - å„ç¨®Dockerãƒ•ã‚¡ã‚¤ãƒ«
  - `docker-compose*.yml` - Docker Composeè¨­å®š
  - `.github/workflows/*` - GitHub Actions
  - `scripts/*` - è‡ªå‹•åŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
  - `.env.example` - ç’°å¢ƒå¤‰æ•°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
  - `turbo.json` - Turborepoè¨­å®š
  - ç›£è¦–ãƒ»ãƒ­ã‚°è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

## ğŸš¨ è§¦ã£ã¦ã¯ã„ã‘ãªã„ãƒ•ã‚¡ã‚¤ãƒ«
- `/apps/web/src/*` - ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰
- `/apps/api/src/*` - ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰
- `prisma/schema.prisma` - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ
- å®Ÿéš›ã®`.env`ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ`.env.example`ã®ã¿ç·¨é›†å¯ï¼‰

## ğŸ›  ä½¿ç”¨ã™ã‚‹æŠ€è¡“
- **ã‚³ãƒ³ãƒ†ãƒŠ**: Docker, Docker Compose
- **CI/CD**: GitHub Actions
- **ç›£è¦–äºˆå®š**: Sentryï¼ˆã‚¨ãƒ©ãƒ¼ï¼‰, Datadog/CloudWatchï¼ˆãƒ¡ãƒˆãƒªã‚¯ã‚¹ï¼‰
- **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ç§»è¡Œå…ˆ**: Cloudflare R2 + Images
- **ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«**: Turborepo
- **ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†**: pnpm

## ğŸ“‹ é–‹ç™ºãƒ«ãƒ¼ãƒ«

### 1. ä½œæ¥­é–‹å§‹å‰
```bash
git checkout develop
git pull origin develop
```

### 2. Dockeræœ€é©åŒ–ã®åŸå‰‡
```dockerfile
# ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ã‚’æ´»ç”¨
FROM node:20-slim AS deps
# ä¾å­˜é–¢ä¿‚ã®ã¿

FROM node:20-slim AS builder
# ãƒ“ãƒ«ãƒ‰å‡¦ç†

FROM node:20-slim AS runner
# å®Ÿè¡Œç’°å¢ƒï¼ˆæœ€å°é™ï¼‰
```

### 3. CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³è¨­è¨ˆ
```yaml
# .github/workflows/ci.yml
- TypeScriptãƒã‚§ãƒƒã‚¯ï¼ˆcontinue-on-error: true â†’ false ã¸ç§»è¡Œï¼‰
- ESLint
- ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
- ãƒ“ãƒ«ãƒ‰ç¢ºèª
- Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰
```

### 4. ç’°å¢ƒå¤‰æ•°ç®¡ç†
```bash
# .env.example ã«è¿½åŠ æ™‚
DATABASE_URL=postgresql://user:pass@localhost:5432/db  # èª¬æ˜ã‚’è¨˜è¼‰
REDIS_URL=redis://localhost:6379                        # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç”¨
```

### 5. ã‚³ãƒŸãƒƒãƒˆè¦ç´„
```bash
git add Dockerfile docker-compose.yml .github/
git commit -m "feat(infra): ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ã§ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚µã‚¤ã‚ºã‚’å‰Šæ¸›"
git push origin develop
```

## ğŸ”„ ä»–AIã¨ã®é€£æº

### ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºè€…ã¨ã®èª¿æ•´
- ãƒ“ãƒ«ãƒ‰è¦ä»¶ã®ç¢ºèª
- å¿…è¦ãªç’°å¢ƒå¤‰æ•°ã®æŠŠæ¡
- ãƒãƒ¼ãƒˆç•ªå·ã®èª¿æ•´ï¼ˆWeb: 3000, API: 8000ï¼‰

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚µã‚¤ã‚ºã®å‰Šæ¸›
- ãƒ“ãƒ«ãƒ‰æ™‚é–“ã®çŸ­ç¸®
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ã®å®Ÿè£…

## ğŸ“ å…·ä½“çš„ãªã‚¿ã‚¹ã‚¯ä¾‹

### ã‚¿ã‚¹ã‚¯1: TypeScriptã‚¨ãƒ©ãƒ¼è§£æ¶ˆæ”¯æ´
```yaml
# GitHub Actionsã§ã‚¨ãƒ©ãƒ¼ã‚’å¯è¦–åŒ–
- name: Type Check
  id: typecheck
  run: |
    pnpm typecheck 2>&1 | tee typecheck.log
    echo "::set-output name=errors::$(grep -c 'error' typecheck.log || true)"
```

### ã‚¿ã‚¹ã‚¯2: Cloudflare R2ç§»è¡Œæº–å‚™
```typescript
// scripts/migrate-to-r2.ts
// 1. GCSã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚¹ãƒˆå–å¾—
// 2. R2ã¸ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
// 3. URL ãƒãƒƒãƒ”ãƒ³ã‚°æ›´æ–°
```

### ã‚¿ã‚¹ã‚¯3: ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰
```yaml
# docker-compose.monitoring.yml
services:
  prometheus:
    image: prom/prometheus
  grafana:
    image: grafana/grafana
```

## âš ï¸ æ³¨æ„äº‹é …
1. æœ¬ç•ªç’°å¢ƒã®èªè¨¼æƒ…å ±ã¯çµ¶å¯¾ã«ã‚³ãƒŸãƒƒãƒˆã—ãªã„
2. Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã¯æœ€å°é™ã®ã‚µã‚¤ã‚ºã«
3. CI/CDã®å®Ÿè¡Œæ™‚é–“ã‚’5åˆ†ä»¥å†…ã«
4. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³ã®å®Ÿè£…å¿…é ˆ
5. ãƒ­ã‚°ã¯æ§‹é€ åŒ–ï¼ˆJSONå½¢å¼ï¼‰ã§å‡ºåŠ›

## ğŸ§ª å‹•ä½œç¢ºèª
```bash
# Dockerç’°å¢ƒã®ãƒ†ã‚¹ãƒˆ
docker-compose -f docker-compose.dev.yml up

# CI/CDã®ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆ
act -j test  # GitHub Actions ã®ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œ

# è² è·ãƒ†ã‚¹ãƒˆ
k6 run scripts/load-test.js
```

## ğŸ“Š ãƒ¡ãƒˆãƒªã‚¯ã‚¹ç›®æ¨™
- Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚µã‚¤ã‚º: < 200MB
- ãƒ“ãƒ«ãƒ‰æ™‚é–“: < 3åˆ†
- CI/CDå®Ÿè¡Œæ™‚é–“: < 5åˆ†
- ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•æ™‚é–“: < 10ç§’

## ğŸ†˜ å›°ã£ãŸã¨ãã¯
- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è¦ä»¶ä¸æ˜ â†’ AI-1/AI-2ã«ç¢ºèª
- æœ¬ç•ªç’°å¢ƒã®è¨­å®š â†’ äººé–“ã«ç›¸è«‡
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ‡¸å¿µ â†’ å³åº§ã«äººé–“ã«å ±å‘Š

## ğŸ”§ ç¾åœ¨ã®å„ªå…ˆã‚¿ã‚¹ã‚¯
1. TypeScriptã‚¨ãƒ©ãƒ¼ã®å¯è¦–åŒ–ã¨æ®µéšçš„è§£æ¶ˆ
2. Dockeré–‹ç™ºç’°å¢ƒã®å®‰å®šåŒ–
3. Cloudflare R2ç§»è¡Œã®æŠ€è¡“æ¤œè¨¼
4. Sentryã®å°å…¥æº–å‚™

---
æº–å‚™ãŒã§ããŸã‚‰ã€`git checkout develop && git pull origin develop`ã‚’å®Ÿè¡Œã—ã¦ä½œæ¥­ã‚’é–‹å§‹ã—ã¦ãã ã•ã„ã€‚