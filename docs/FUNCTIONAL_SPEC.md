# 不動産売買DXシステム 機能仕様書

**バージョン**: 2.0  
**作成日**: 2025年7月10日  
**更新日**: 2025年7月11日  

---

## 📋 システム概要

### 目的
不動産売買業務の**複数入力負荷解消**と**法令準拠自動化**により、実際の作業者の痛みを解決するSaaSプラットフォーム。AI分析よりも日常業務の効率化を重視。

### 対象ユーザー
- 不動産会社（仲介業者）
- 不動産投資家
- 不動産コンサルタント
- 金融機関（不動産担保評価部門）

---

## 🏗️ システム構成

### アーキテクチャ
- **フロントエンド**: Next.js 14 + TypeScript + shadcn/ui
- **バックエンド**: Node.js + Express + Prisma ORM
- **AI-OCR**: Python + FastAPI + **Gemini 2.0 Flash**（OCR最適化）
- **AI-汎用**: **Gemini 2.5 Flash**（一般的なタスク）
- **データベース**: PostgreSQL（マルチテナント対応）
- **インフラ**: Google Cloud Platform
- **認証**: NextAuth.js + OAuth 2.0

---

## 🎯 リリース別機能構成

### 🚀 **アルファ版**（完了済み）
**基本的なMVP機能 - 単一システム内での効率化**

#### ✅ 認証・基盤機能
- JWT認証システム
- ユーザー管理（RBAC）
- マルチテナント基盤

#### ✅ 物件管理機能
- 物件CRUD操作
- 物件検索・フィルタリング
- 画像管理・お気に入り機能

#### ✅ ファイル管理・OCR機能
- 画像・PDF・Excelアップロード
- OCR処理（**Gemini 2.0 Flash**使用）
- ファイル管理・削除

#### ✅ 問い合わせ管理機能
- 公開問い合わせフォーム
- 管理機能（アサイン・ステータス管理）
- 統計情報・レスポンス機能

#### ✅ 外部システム連携基盤
- REINS・AtHome・ハトサポ等の認証管理
- 接続テスト機能
- 同期操作・履歴管理

#### ✅ 分析・レポート機能
- 基本的な統計情報
- レポート生成
- ダッシュボード・チャート機能

---

### 🎯 **ベータ版**（次期実装）
**作業者の本当の痛みを解決 - 複数入力解消 & 法令準拠自動化**

#### 1. **統合物件管理（Unified Form）** 🆕
**問題**: 複数サイトへの重複入力で時間浪費（現場での最大課題）
**解決**: 1回入力で全サイト自動配信 → 将来的に「ゼロ回入力」を目指す

- **一元入力画面**: 1つのフォームで全ての外部システムに対応
- **自動配信**: REINS、AtHome、SUUMO、LIFULL等への同時掲載
- **配信状況管理**: 各サイトの掲載状況をリアルタイム監視
- **個別調整**: サイト固有の項目調整機能
- **配信履歴**: 配信成功・失敗の詳細ログ
- **OCR統合準備**: 登記簿PDFからの自動データ抽出機能（Phase 2で実装）

#### 2. **法令準拠チェック機能** 🆕
**問題**: 法令違反リスクで業務不安（事業継続の生命線）
**解決**: システムが自動で法令準拠を保証

- **宅建業法チェック**: 必須記載事項の自動検証
- **表示規約チェック**: 不動産公正取引協議会の規約準拠
- **禁止表現検出**: 「完璧」「絶対」等の使用禁止語句チェック
- **修正提案**: 法令違反項目の具体的修正案提示
- **チェック履歴**: 法令チェック結果の監査ログ
- **地域特化対応**: 沖縄等の地方法令・条例への対応強化

#### 3. **契約管理機能** 🆕
**問題**: 契約書作成で法的リスクと時間浪費
**解決**: 法令準拠テンプレートで安全・迅速な契約書作成

- **ハトサポ書式完全対応**: 司法書士・銀行連携レベルの正確性確保
- **法令準拠テンプレート**: 宅建業法・民法改正対応済み
- **重要事項説明書自動生成**: 物件情報から自動作成
- **必須条項自動挿入**: 法定記載事項の自動補完
- **契約進捗管理**: 法的期限の自動追跡・アラート
- **電子契約対応**: ハトサポBB連携での電子締結
- **法改正自動対応**: 月次レベルの法改正への迅速対応

#### 4. **書類管理機能** 🆕
**問題**: 法定保存書類の管理負荷
**解決**: 自動分類・期限管理で確実な法令遵守

- **自動分類**: 登記簿、契約書等の文書種別自動判定
- **保存期限管理**: 法定保存期間の自動追跡
- **監査対応**: 監査時の必要書類自動準備
- **アラート機能**: 保存期限切れ前の事前通知

#### 5. **アルファ版機能継続利用**
**重要**: アルファ版の全機能はそのまま利用可能
- 既存ワークフローを維持
- ベータ版機能と併用可能
- 段階的な機能移行をサポート

---

## 💻 技術仕様

### AI モデル選定理由
- **Gemini 2.0 Flash**: OCR・文書処理に最適（精度95%以上）
- **Gemini 2.5 Flash**: 一般的なタスクに最適（速度・コスト・精度のバランス）

### セキュリティ仕様
- **データ暗号化**: AES-256-GCM暗号化
- **認証情報管理**: テナント別暗号化キー
- **アクセス制御**: Row Level Security (RLS)
- **監査ログ**: 全操作ログ記録

### パフォーマンス仕様
- **レスポンス時間**: API応答時間 < 500ms
- **OCR処理時間**: 文書1件あたり < 20秒（Gemini 2.0 Flash使用）
- **同時接続数**: 1000ユーザー同時接続対応
- **データ量**: テナントあたり100GB対応

---

## 📊 データ仕様

### 主要エンティティ
- **Tenant**: テナント情報
- **User**: ユーザー情報  
- **Property**: 物件情報
- **Document**: 文書情報
- **ExternalSystemAuth**: 外部システム認証情報
- **PublicationLog**: 配信履歴 🆕
- **ComplianceCheck**: 法令チェック履歴 🆕
- **Contract**: 契約情報
- **Inquiry**: 問い合わせ情報

---

## 🚀 ベータ版実装フェーズ

### Phase 1: 統合配信機能（3週間）
- Unified Form実装
- 外部システム自動配信
- 配信状況監視

### Phase 2: 法令準拠機能（3週間）
- 法令チェックエンジン
- 修正提案システム
- チェック履歴管理

### Phase 3: 契約・書類管理（4週間）
- 契約管理機能
- 書類自動分類
- 法定期限管理

---

## 🎯 ベータ版の価値提案（Gemini評価反映）

### 従来の問題 → ベータ版での解決

| 従来の問題 | ベータ版での解決 | 効果 |
|-----------|----------------|------|
| 5サイトに同じ物件を5回入力 | 1回入力で5サイト同時配信 → 将来ゼロ回入力 | **80%時短** |
| 法令違反の不安・チェック作業 | 自動法令チェック・修正提案 | **リスク完全解消** |
| 契約書作成の法的不安 | ハトサポ書式完全対応・法令準拠テンプレート | **安全性確保** |
| バラバラな書類管理 | 自動分類・期限管理 | **漏れ防止** |
| 沖縄等不慣れ地域の法令調査 | 地域特化法令データベース | **調査時間短縮** |

### ROI試算（現場データベース）
- **時短効果**: 1物件あたり2時間 → 30分（**75%削減**）
- **法令調査**: 半日～1週間 → 数分（**95%削減**）
- **リスク軽減**: 法令違反による罰金リスクの実質的解消
- **業務品質向上**: ヒューマンエラーの大幅削減
- **年間コスト削減**: 数百万円の既存システムコストの効率化

### 🏆 競合優位性（Gemini分析結果）
- **統合性**: 既存システムにない「攻め」と「守り」の最適組み合わせ
- **法令対応**: CI/CDによる自動法改正対応は他社にない強み
- **現場フォーカス**: AI分析より日常業務効率化を優先した実用性

---

## 🔄 更新履歴

### v2.1 (2025-07-11) 🆕 **Gemini相談結果反映版**
- **GeminiとのAI相談でA+評価を獲得**
- OCR機能の早期統合検討を明記（「ゼロ回入力」への進化）
- ハトサポ書式完全対応を最重要目標として設定
- 法令準拠機能を「事業継続の生命線」として再定義
- 地域特化法令対応（沖縄等）を特別強化項目として追加
- 段階的リリース戦略を明記（Phase 1/2構成）
- 競合優位性分析を「攻め」と「守り」の最適組み合わせとして明確化

### v2.0 (2025-07-11) 🆕
- **ベータ版スコープを実際の作業者の痛み解決に特化**
- 複数入力解消のUnified Form機能を追加
- 法令準拠自動化機能を追加
- AI分析等の付加価値機能をベータ版から除外
- AIモデルを最新版（Gemini 2.0/2.5 Flash）に更新
- アルファ版機能継続利用を明記

### v1.2 (2025-07-10)
- 外部システム連携管理機能を追加
- テナント別認証情報管理機能を追加
- RPA自動化機能詳細を追加
- セキュリティ仕様を強化

### v1.1 (2025-07-09)
- AI-OCR機能詳細を追加
- マルチテナント仕様を詳細化
- 分析・レポート機能を追加

### v1.0 (2025-07-08)
- 初版作成
- 基本機能仕様定義
- システム構成決定

---

**承認者**: システム設計責任者  
**承認日**: 2025年7月11日