# ドキュメントレビューメモ (2025-07-01 更新)

以下は `docs` 配下のドキュメントを一通り確認した上でのレビューコメントです。緊急度の高いものから順に *[優先度]* を付与しています。修正・追記の際の参考にしてください。

---

## 0. 共通・横断的な指摘

1. **[高] バージョン管理・改訂履歴の欠落**  
   - ほぼ全ファイルで *Draft* 版かつ作成日／改訂履歴 (Change-log) の記載がありません。今後のレビュープロセスを明確化するためにも、以下フォーマットで最上部に表形式で追加を推奨します。  
     `| Ver | 日付 | 作成 / 変更者 | 変更概要 |`  
     Git の履歴だけでは参照しづらいため、ドキュメント単体でも履歴が追えるようにしてください。  
   ★ **今回追加された `技術選定根拠書.md`, `開発環境構築ガイド.md` などでは履歴表が早速導入されており好例です。残りの既存ドキュメントにも同形式で統一してください。**
2. **[中] ファイル命名規則の一貫性**  
   - `ARC-xxx` 系と `機能仕様書 xxx` 系で接頭辞の置き方が混在しています。`<カテゴリ>-<連番>_<タイトル>.md` など命名規則を README に明文化し、CI で lint する仕組みも検討ください。
3. **[中] 目次 (TOC) の自動生成**  
   - 長文 (200 行以上) のファイルでは VS Code 拡張等で生成したマークダウン TOC を置くと可読性が向上します。
4. **[低] 用語の揺れ**  
   - "LLM", "大規模言語モデル", "生成AI" など同義語が混在。README 内に **用語集 (Glossary)** を設け統一を。
5. **[低] Mermaid 図の活用**  
   - `architecture` 配下で図示がない文書 (マルチテナント方式.md 等) にはデータフロー / コンポーネント図があると理解が早まります。

---

## 1. docs/architecture

| ファイル | コメント |
| --- | --- |
| マルチテナント方式.md | RDB のスキーマ分離パターンを採用とあるが、**バックアップ/リストア戦略** が未記載。テナント単位復旧手順を追記ください。 |
| 多言語対応方針.md | **I18n ライブラリ選定理由** が曖昧。`i18next` を採用予定なら競合比較 (Next-Intl 等) を簡潔に追加すると説得力が増します。 |
| technical_feasibility_study.md | 各 PoC に **成功基準 (Exit Criteria)** が無い。例: "RPA 失敗率 < 2% / 500 回試行" のような定量指標を設定必須。 |
| 監査ログポリシー.md | **保存期間と保管場所** が未定義。S3 Glacier 等を想定する場合はコスト見積もりも合わせて記載を。 |
| 非機能要件一覧.md | 可用性 99.5% とあるが、RPO/RTO が 1h/4h → **整合性要確認**。99.5% (月 3.6h) だと RTO 4h を超過する可能性あり。 |
| api/metrics.md | RED Method は良いが、**SLO / SLA** の数値が未設定。95th レイテンシ 500 ms を SLA とするなら別途記載してください。 |
| 技術選定根拠書.md | 技術選定の比較表が充実しているが、**評価基準の重みづけ** を明記すると意思決定プロセスが透明化される。特に「AI駆動開発親和性」の定量スコア算出根拠を追記すると良い。 |
| 開発環境構築ガイド.md | Windows / macOS / Linux それぞれの**パス設定・コマンド差異**を脚注で補足するとハマりどころを減らせる。加えて VS Code 推奨設定は `.vscode/extensions.json` と `.devcontainer` での自動適用を検討。 |

---

## 2. docs/development_scope

| ファイル | コメント |
| --- | --- |
| release_scope.md | マイルストーン一覧はあるが **クリティカルパス** と **リスクバッファ** が不明。ガントチャート図を添付するとステークホルダーが把握しやすい。 |

---

## 3. docs/機能仕様書

共通:  
- `前提条件` > `システム構成` の章がテンプレート上存在するものの、記載が空の文書が散見されるため埋めること。  
- 正常系/異常系シーケンス図を差し込みコメントで表現しているが、Mermaid sequence 図として描くと統一感あり。

| ファイル | 主なレビュー観点 |
| --- | --- |
| AUTH-001 | PKCE Flow 使用とあるが、SPA → BE 間の Token Storage 方針 (Cookie vs LocalStorage) が述べられていない。 |
| API-001 | レートリミット 30 req/min とあるが、429 応答時の **Retry-After ヘッダー** の仕様が未定義。 |
| CON-001 | レインズ API の更新頻度が週 1 と記載 → **実際は毎営業日** のため要修正。 |
| REP-002 | AI 推論コスト試算が古い (GPT-4 2024-04). 最新単価へ更新推奨。 |
| DSH-001 | ダッシュボードの KPI 定義が抽象的。例: "案件進捗率" → 分母/分子を明確化。 |
| MIG-001 | 100 MB 超 CSV の chunk 処理について記述が無い。大容量データ時の制限事項を追加。 |
| ADM-001 | 管理者ロールの**RBAC マトリクス**が未完成。具体的な権限（読み・書き・削除・設定）と対象リソースを表形式で列挙してください。 |
| SUP-001 | チケット**エスカレーションフロー**と SLA (First Response / Resolution) が未定義。Zendesk 連携等の選択肢比較もあると◎。 |
| MON-001 | 使用量制限の**しきい値変更手順**が UI/CLI でどう行えるか未記載。Alert 連携 (メール / Slack) と合わせて記載を。 |
| SUB-001 | プラン変更時の**日割り課金・プロレータ処理**の挙動が未定義。Stripe など PSP の仕様差異を踏まえた設計が必要。 |
| TNT-001 | テナント削除機能における**論理削除 vs 物理削除**ポリシーが未確定。GDPR対応の観点から最長保管期間を明文化ください。 |

---

## 4. docs/TODO.md

- 期限 "TBD" のタスクは減少したものの、**完了基準 (Definition of Done)** が未記載。担当者・優先度に加え DoD を設定し、タスク管理ツール (e.g. GitHub Projects) と連携するとベロシティ測定が容易になります。

---

## 5. docs/システム仕様書.md & 不動産売買DX 新規事業構想書.md

- 重複する背景説明 (市場課題等) があるため、重複部分は前者に集約し、後者ではビジネス観点のみにフォーカスする構成整理を推奨。

---

### 次アクション提案

1. 本レビューで *[高]* 指摘の箇所を優先的に修正。
2. Markdown Linter (e.g. `markdownlint`) を CI に組み込み、フォーマットの自動検証を開始。
3. Mermaid 図の導入・自動 TOC 生成を Makefile or npm script で自動化。
4. 次回リリース前に再レビューし、改善状況をトラッキング。

以上 