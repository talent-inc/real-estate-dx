# 外部連携実現可能性調査結果

| Ver | 日付 | 作成 / 変更者 | 変更概要 |
|-----|------|---------------|----------|
| 1.0 | 2025-07-08 | システム管理者 | 初版作成（技術的実現可能性検証） |

---

## 1. 調査概要

### 1.1 調査目的
不動産売買システムにおける外部連携機能の技術的実現可能性を検証し、リスクと代替案を評価する。

### 1.2 調査対象
- **レインズ連携**（CON-001）: 不動産流通機構システム
- **ハトサポ連携**（CTR-001）: 全日本不動産協会の契約書生成システム
- **アットホーム連携**（CON-002）: 不動産ポータルサイト連携

---

## 2. 調査結果サマリー

### 2.1 総合評価
| 連携システム | 実現可能性 | リスクレベル | 推奨アプローチ |
|-------------|------------|-------------|----------------|
| **レインズ** | **高** | **低** | 政府API経由（アプローチ変更） |
| **ハトサポ** | **中** | **高** | RPA+内製エンジン並行開発 |
| **アットホーム** | **高** | **中** | API交渉+技術調査 |

### 2.2 重要な発見
1. **レインズ連携**: 政府「不動産情報ライブラリ」API（2024年4月開始）の存在を確認
2. **ハトサポ連携**: 公開APIなし、会員制限あり、RPA必須
3. **アットホーム連携**: 他社との連携実績あり、交渉次第で利用可能

---

## 3. 各連携の詳細評価

### 3.1 レインズ連携（CON-001）

#### 現状分析
- **当初想定**: アットホーム経由でのレインズ連携
- **調査結果**: 政府「不動産情報ライブラリ」APIが利用可能
- **取得可能データ**: 取引価格情報（個人特定不可形式）
- **API仕様**: 2024年4月より公開開始

#### 実現可能性評価
- **技術的実現性**: **高**
- **コスト**: **低**（政府提供API）
- **安定性**: **高**（政府公式API）
- **リスク**: **低**

#### 推奨アプローチ
1. **アプローチ変更**: 「アットホーム経由」→「政府API経由」
2. **段階的実装**:
   - Phase 1: 取引価格情報取得・分析機能
   - Phase 2: 物件登録機能（要詳細調査）
3. **フォールバック**: 登録機能が不可の場合、CSV連携維持

#### 次のアクション
- [ ] 政府API仕様の詳細調査（物件登録可否）
- [ ] 機能仕様書CON-001の更新

### 3.2 ハトサポ連携（CTR-001）

#### 現状分析
- **システム概要**: 全宅連（全日本不動産協会）の会員限定システム
- **提供機能**: Web書式作成システム（契約書・重説生成）
- **アクセス制限**: 会員のみ、ハトサポID/パスワード必須
- **API状況**: 公開APIなし

#### 実現可能性評価
- **技術的実現性**: **中**（RPA必須）
- **コスト**: **中**（RPA開発・保守）
- **安定性**: **低**（UI変更リスク）
- **リスク**: **高**（外部UI依存）

#### 推奨アプローチ
1. **短期**: RPAによる連携（MVP対応）
2. **監視体制**: DOM差分監視、Visual Regressionテスト
3. **長期**: 内製帳票エンジン開発（脱RPA）

#### 次のアクション
- [ ] ハトサポ利用規約確認（RPA/スクレイピング制限）
- [ ] 内製エンジン開発計画の策定
- [ ] 機能仕様書CTR-001の更新

### 3.3 アットホーム連携（CON-002）

#### 現状分析
- **連携実績**: ライナフとのAPI連携（2020年開始）
- **技術的可能性**: API提供の可能性あり
- **商用利用**: 要交渉（仕様・料金・契約条件）

#### 実現可能性評価
- **技術的実現性**: **高**（要交渉）
- **コスト**: **未定**（交渉次第）
- **安定性**: **中**（商用API）
- **リスク**: **中**（契約・料金依存）

#### 推奨アプローチ
1. **API交渉**: 公式問い合わせ開始
2. **ハイブリッド戦略**: API+RPA併用
3. **リスク分散**: レインズ連携の切り離し

#### 次のアクション
- [ ] アットホーム社へのAPI利用問い合わせ
- [ ] 料金体系・契約条件の調査
- [ ] 技術仕様の詳細確認

---

## 4. 実装優先度と戦略

### 4.1 推奨実装順序
| 優先度 | 機能 | 実装アプローチ | 理由 |
|--------|------|----------------|------|
| **1** | **レインズ連携** | 政府API主軸 | 最も確実性が高く、低リスク |
| **2** | **ハトサポ連携** | RPA+内製エンジン | ユーザー価値は高いが、リスク管理必要 |
| **3** | **アットホーム連携** | API交渉優先 | 外部交渉が必要なため |

### 4.2 リスク管理戦略
1. **レインズ**: 政府API活用でアットホーム依存度を下げる
2. **ハトサポ**: 内製エンジン開発でRPA依存から脱却
3. **アットホーム**: API利用できない場合のRPAフォールバック

---

## 5. 技術的課題と対策

### 5.1 共通課題
- **認証・認可**: 各システムの認証方式への対応
- **データ形式**: 異なるデータ形式の統一化
- **エラーハンドリング**: 外部システム障害時の対応
- **レート制限**: API呼び出し制限への対応

### 5.2 RPA特有の課題
- **UI変更対応**: 外部システムのUI変更への脆弱性
- **実行環境**: ブラウザ環境の管理と更新
- **監視・復旧**: 自動監視とフェイルオーバー機能
- **セキュリティ**: 認証情報の安全な管理

---

## 6. 今後のアクション計画

### 6.1 即時実行項目
- [ ] 政府「不動産情報ライブラリ」APIの詳細仕様調査
- [ ] アットホーム社へのAPI利用問い合わせ
- [ ] ハトサポ利用規約の確認

### 6.2 短期実行項目（1-2週間）
- [ ] 機能仕様書の更新（CON-001, CTR-001）
- [ ] 内製帳票エンジンの設計開始
- [ ] RPAプロトタイプの技術検証

### 6.3 中期実行項目（1-2ヶ月）
- [ ] 政府API連携の実装開始
- [ ] アットホームAPI交渉の進捗確認
- [ ] RPA監視システムの設計

---

## 7. 結論

外部連携機能は**段階的な実装により実現可能**と評価する。特に：

1. **レインズ連携**: 政府API活用により、当初想定より低リスク・低コストで実現可能
2. **ハトサポ連携**: RPAによる短期実装は可能だが、内製エンジン開発による長期的な安定性確保が必要
3. **アットホーム連携**: API交渉次第だが、連携実績から実現可能性は高い

**最重要事項**: ハトサポ連携のRPA依存リスクを軽減するため、内製帳票エンジンの開発を最優先で進める必要がある。

---

## 8. 関連文書
- [機能仕様書 CON-001 レインズ連携](../機能仕様書/機能仕様書%20CON-001%20レインズ連携（アットホーム経由）.md)
- [機能仕様書 CTR-001 契約書・重説の自動生成](../機能仕様書/機能仕様書%20CTR-001%20契約書・重説の自動生成（ハトサポ連携）.md)
- [機能仕様書 CON-002 不動産ポータルサイト連携](../機能仕様書/機能仕様書%20CON-002%20不動産ポータルサイト連携.md)
- [技術選定根拠書](技術選定根拠書.md)
- [非機能要件一覧](非機能要件一覧.md)